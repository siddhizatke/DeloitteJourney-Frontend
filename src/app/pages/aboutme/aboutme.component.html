<div class="container-fluid mt-3">
  <div class="row justify-content-center">
    <!-- Show a message if the list is empty -->
    <div *ngIf="!service.pagesDetailsList || service.pagesDetailsList.length === 0" class="text-center">
      <p class="text-danger fw-bold">No Data Available.</p>
    </div>

    <div class="container-fluid">
      <!-- Main Container -->
      <ul class="list-group">
        <!-- Success Message -->
        <div *ngIf="successMessage" class="alert alert-success mt-3" role="alert">
          {{ successMessage }}
        </div>

        <li class="list-group-item d-flex align-items-start" *ngFor="let pd of service.pagesDetailsList">
          <div class="d-flex w-100">
            <!-- Left Section: Name, Tabs, and Content -->
            <div class="flex-grow-1">
              <h3 class="fw-bold">{{ pd.name }}</h3>
              <!-- Tabs Navigation -->
              <ul class="nav nav-tabs mt-3 custom-tabs" id="aboutMeTabs" role="tablist">
                <li class="nav-item" role="presentation">
                  <button class="nav-link active" id="aboutMe-tab" data-bs-toggle="tab" data-bs-target="#aboutMe" type="button" role="tab" aria-controls="aboutMe" aria-selected="true">
                    Personal
                  </button>
                </li>
                <li class="nav-item" role="presentation">
                  <button class="nav-link" id="Resume-tab" data-bs-toggle="tab" data-bs-target="#Resume" type="button" role="tab" aria-controls="Resume" aria-selected="false">
                    Professional
                  </button>
                </li>
              </ul>
              <!-- Tabs Content -->
              <div class="tab-content mt-3" id="aboutMeTabsContent">
                <div class="tab-pane fade show active" id="aboutMe" role="tabpanel" aria-labelledby="aboutMe-tab" style="width: 600px;">
                  <div class="fs-5" [innerHTML]="pd.aboutMe"></div>
                </div>
                <div class="tab-pane fade" id="Resume" role="tabpanel" aria-labelledby="Resume-tab" style="width: 600px;">
                  <div class="fs-5" [innerHTML]="pd.aboutMeFormal"></div>
                </div>
              </div>
            </div>
            <!-- Right Section: Profile Picture -->
            <div class="ms-4">
              <img
                [src]="pd.profilePictureUrl"
                alt="Profile Picture"
                class="img-thumbnail rounded-rectangle shadow-lg mb-3"
                style="width: 450px; height: 350px;"
              />
            </div>
          </div>
        </li>
      </ul>
    </div>

    <!-- Modal Template -->
    <ng-template #editModal let-modal>
      <div class="modal-header">
        <h5 class="modal-title">Update Details</h5>
        <button type="button" class="btn-close" aria-label="Close" (click)="modal.dismiss()"></button>
      </div>
      <div class="modal-body">
        <form (ngSubmit)="updateDetails()">
          <!-- Name Field -->
          <div class="mb-3">
            <label for="name" class="form-label">Name</label>
            <input type="text" id="name" class="form-control" [(ngModel)]="selectedDetails.name" name="name" required />
          </div>

          <!-- About Me Field -->
          <div class="mb-3">
            <label for="aboutMe" class="form-label">Personal</label>
            <textarea id="aboutMe" class="form-control" [(ngModel)]="selectedDetails.aboutMe" name="aboutMe" rows="5" required></textarea>
          </div>

          <!-- About Me Field -->
          <div class="mb-3">
            <label for="aboutMe" class="form-label">Professional</label>
            <textarea id="resume" class="form-control" [(ngModel)]="selectedDetails.aboutMeFormal" name="resume" rows="5" required></textarea>
          </div>

          <!-- Profile Picture Field in Modal -->
          <div class="mb-3">
            <label for="profilePicture" class="form-label">Profile Picture</label>
            <input type="file" id="profilePicture" class="form-control" (change)="onProfilePictureSelected($event)" />
            <img *ngIf="selectedFile" [src]="selectedFilePreviewUrl" alt="Profile Picture Preview" class="img-thumbnail mt-3" style="width: 150px; height: 150px;" />
            <img *ngIf="!selectedFile && selectedDetails?.profilePictureUrl" [src]="selectedDetails.profilePictureUrl" alt="Profile Picture" class="img-thumbnail mt-3" style="width: 150px; height: 150px;" />
          </div>

          <!-- Buttons -->
          <button type="submit" class="btn btn-primary">Save</button>
          <button type="button" class="btn btn-secondary"(click)="modal.dismiss()">Cancel</button>
        </form>
      </div>
    </ng-template>

    <!-- Edit Button -->
    <li class="container-fluid text-center" *ngFor="let pd of service.pagesDetailsList">
        <button type="button" class="btn edit-button" (click)="openEditModal(pd, editModal)">Edit Profile</button>
      </li>
    <!-- Carousel -->
    <div *ngIf="service.PagesdetailsPhotosList && service.PagesdetailsPhotosList.length > 0">
      <div id="carouselExampleIndicators" class="carousel slide" data-bs-ride="carousel" data-bs-interval="500">
        <div class="carousel-indicators">
          <button
            *ngFor="let photo of service.PagesdetailsPhotosList; let i = index"
            type="button"
            [attr.data-bs-target]="'#carouselExampleIndicators'"
            [attr.data-bs-slide-to]="i"
            [class.active]="i === 0"
            aria-current="i === 0 ? 'true' : 'false'"
            [attr.aria-label]="'Slide ' + (i + 1)"
          ></button>
        </div>
        <div class="carousel-inner">
          <div *ngFor="let photo of service.PagesdetailsPhotosList; let i = index" class="carousel-item" [class.active]="i === 0">
            <img
              [src]="photo.photoUrl"
              alt="Photo"
              class="d-block w-100 carousel-image"
            />
          </div>
        </div>
        <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide="prev">
          <span class="carousel-control-prev-icon" aria-hidden="true"></span>
          <span class="visually-hidden">Previous</span>
        </button>
        <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide="next">
          <span class="carousel-control-next-icon" aria-hidden="true"></span>
          <span class="visually-hidden">Next</span>
        </button>
      </div>
    </div>
  </div>
</div>



